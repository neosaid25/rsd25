# ููุฒุฉ ูุงุฆูุฉ ุงูุชุณูู ุงูุฐููุฉ ๐

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅุถุงูุฉ ููุฒุฉ ุฌุฏูุฏุฉ ูุฅูุดุงุก ููุงุฆู ุงูุชุณูู ุชููุงุฆูุงู ูู ุฎุทุท ุงููุฌุจุงุช ุงููุญููุธุฉ. ูุฐู ุงูููุฒุฉ ุชุณูุญ ูููุณุชุฎุฏููู ุจุชุญููู ุฎุทุทูู ุงูุฃุณุจูุนูุฉ ูุงูุดูุฑูุฉ ุฅูู ููุงุฆู ุชุณูู ููุธูุฉ.

## ุงููููุงุช ุงููุถุงูุฉ/ุงููุญุฏุซุฉ

### 1. ุฎุฏูุฉ ูุงุฆูุฉ ุงูุชุณูู ุงูุฌุฏูุฏุฉ
**ุงูููู**: `lib/app/data/services/shopping_list_service.dart`

**ุงููุธุงุฆู ุงูุฑุฆูุณูุฉ**:
- `generateShoppingListFromWeeklyPlan()`: ุฅูุดุงุก ูุงุฆูุฉ ุชุณูู ูู ุฎุทุฉ ุฃุณุจูุนูุฉ
- `generateShoppingListFromMonthlyPlan()`: ุฅูุดุงุก ูุงุฆูุฉ ุชุณูู ูู ุฎุทุฉ ุดูุฑูุฉ
- `saveShoppingList()`: ุญูุธ ูุงุฆูุฉ ุงูุชุณูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- `getSavedShoppingLists()`: ุงุณุชุฑุฌุงุน ููุงุฆู ุงูุชุณูู ุงููุญููุธุฉ

### 2. ุชุญุฏูุซ ุดุงุดุฉ "ุฎุทุทู"
**ุงูููู**: `lib/app/presentation/meal_planning/screens/my_plans_screen.dart`

**ุงูุชุญุฏูุซุงุช**:
- ุฅุถุงูุฉ ุฃุฒุฑุงุฑ "ุฅูุดุงุก ูุงุฆูุฉ ุชุณูู" ููุฎุทุท ุงูุฃุณุจูุนูุฉ ูุงูุดูุฑูุฉ
- ุฏูุงู ููุนุงูุฌุฉ ุฅูุดุงุก ููุงุฆู ุงูุชุณูู
- ูุคุดุฑุงุช ุชุญููู ูุชูุจููุงุช ูููุณุชุฎุฏู

### 3. ุชุญุฏูุซ ุดุงุดุฉ ูุงุฆูุฉ ุงูุชุณูู
**ุงูููู**: `lib/app/presentation/shopping_list/screens/shopping_list_screen.dart`

**ุงูุชุญุฏูุซุงุช**:
- ุฏุงูุฉ `addItemsFromShoppingList()` ูุฅุถุงูุฉ ุนูุงุตุฑ ูู ูุตุงุฏุฑ ุฎุงุฑุฌูุฉ
- ุชุญุณูู ุฅุฏุงุฑุฉ ุงูุนูุงุตุฑ ุงูููุฑุฑุฉ
- ุฏูุงู ูุณุงุนุฏุฉ ููุชุญูู ูู ุงููุงุฆูุฉ

## ููููุฉ ุนูู ุงูููุฒุฉ

### 1. ุงุณุชุฎุฑุงุฌ ุงููุตูุงุช ูู ุงูุฎุทุฉ
```dart
// ุฌูุน ุฃุณูุงุก ุงููุตูุงุช ูู ุงูุฎุทุฉ
final Set<String> recipeNames = {};
weeklyPlan.forEach((day, dayMeals) {
  dayMeals.forEach((mealType, meals) {
    for (var meal in meals) {
      if (meal['name'] != null && meal['name']!.isNotEmpty) {
        recipeNames.add(meal['name']!);
      }
    }
  });
});
```

### 2. ุงูุญุตูู ุนูู ุงููุตูุงุช ุงููุทุงุจูุฉ
```dart
final allRecipes = await _recipeService.getUserRecipes();
final requiredRecipes = allRecipes.where((recipe) => 
  recipeNames.contains(recipe.name)
).toList();
```

### 3. ุชุฌููุน ุงูููููุงุช
```dart
final Map<String, ShoppingItem> consolidatedItems = {};

for (var recipe in requiredRecipes) {
  for (var ingredient in recipe.ingredients) {
    final key = '${ingredient.name}_${ingredient.unit}';
    
    if (consolidatedItems.containsKey(key)) {
      // ุฏูุฌ ุงููููุงุช ุงููุชุดุงุจูุฉ
      // ...
    } else {
      // ุฅุถุงูุฉ ูููู ุฌุฏูุฏ
      // ...
    }
  }
}
```

## ูุงุฌูุฉ ุงููุณุชุฎุฏู

### ุฃุฒุฑุงุฑ ุฅูุดุงุก ูุงุฆูุฉ ุงูุชุณูู
- **ุงููููุน**: ุตูุญุฉ "ุฎุทุทู" ุจุฌุงูุจ ูู ุฎุทุฉ ูุญููุธุฉ
- **ุงูุฃููููุฉ**: ๐ (shopping_cart)
- **ุงูููู**: ุฃุฎุถุฑ ููุชูููุฒ

### ุชุฏูู ุงูุนูู
1. ุงููุณุชุฎุฏู ูุถุบุท ุนูู ุฒุฑ ูุงุฆูุฉ ุงูุชุณูู
2. ูุธูุฑ ูุคุดุฑ ุชุญููู
3. ูุชู ุงุณุชุฎุฑุงุฌ ุงูููููุงุช ูู ุงูุฎุทุฉ
4. ูุชู ุงูุงูุชูุงู ุฅูู ุดุงุดุฉ ูุงุฆูุฉ ุงูุชุณูู
5. ุชุชู ุฅุถุงูุฉ ุงูุนูุงุตุฑ ุชููุงุฆูุงู
6. ูุธูุฑ ุชูุจูู ุจูุฌุงุญ ุงูุนูููุฉ

## ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

### ุงูุฃุฎุทุงุก ุงููุญุชููุฉ
- ุนุฏู ูุฌูุฏ ูุตูุงุช ูู ุงูุฎุทุฉ
- ูุดู ูู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุนุฏู ุชุณุฌูู ุฏุฎูู ุงููุณุชุฎุฏู

### ุงูุญููู ุงููุทุจูุฉ
```dart
try {
  // ุงูุนูููุฉ ุงูุฑุฆูุณูุฉ
} catch (e) {
  // ุฅุบูุงู ูุคุดุฑ ุงูุชุญููู
  if (mounted && Navigator.canPop(context)) Navigator.pop(context);
  
  // ุนุฑุถ ุฑุณุงูุฉ ุฎุทุฃ
  ScaffoldMessenger.of(context).showSnackBar(
    SnackBar(
      content: Text('ุฎุทุฃ ูู ุฅูุดุงุก ูุงุฆูุฉ ุงูุชุณูู: ${e.toString()}'),
      backgroundColor: Colors.red,
    ),
  );
}
```

## ุงูุชุญุณููุงุช ุงููุณุชูุจููุฉ

### 1. ุญูุธ ููุงุฆู ุงูุชุณูู
- ุฅุถุงูุฉ ุฅููุงููุฉ ุญูุธ ููุงุฆู ุงูุชุณูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุนุฑุถ ููุงุฆู ุงูุชุณูู ุงููุญููุธุฉ ุณุงุจูุงู

### 2. ุชุญุณูู ุชุฌููุน ุงูููููุงุช
- ุฏุนู ูุญุฏุงุช ููุงุณ ูุฎุชููุฉ
- ุชุญููู ุงููุญุฏุงุช ุชููุงุฆูุงู (ูุซู: ุฌุฑุงู ุฅูู ููููุฌุฑุงู)

### 3. ููุฒุงุช ุฅุถุงููุฉ
- ุฅุถุงูุฉ ุฃุณุนุงุฑ ุชูุฏูุฑูุฉ ููููููุงุช
- ุชุตููู ุงูููููุงุช ุญุณุจ ุงููุชุงุฌุฑ
- ูุดุงุฑูุฉ ููุงุฆู ุงูุชุณูู ูุน ุฃูุฑุงุฏ ุงูุนุงุฆูุฉ

## ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ ุงููุญุฏุฉ
```bash
# ุชุดุบูู ุงุฎุชุจุงุฑ ุจุณูุท
dart test_shopping_list.dart
```

### ุงุฎุชุจุงุฑ ุงูุชูุงูู
1. ุฅูุดุงุก ุฎุทุฉ ูุฌุจุงุช ุชุญุชูู ุนูู ูุตูุงุช
2. ุญูุธ ุงูุฎุทุฉ
3. ุงูุถุบุท ุนูู ุฒุฑ ุฅูุดุงุก ูุงุฆูุฉ ุงูุชุณูู
4. ุงูุชุญูู ูู ุธููุฑ ุงูููููุงุช ูู ูุงุฆูุฉ ุงูุชุณูู

## ุงูุฏุนู ูุงูุตูุงูุฉ

### ููุงุท ุงููุฑุงูุจุฉ
- ุฃุฏุงุก ุงุณุชุฎุฑุงุฌ ุงูููููุงุช ูู ุงูุฎุทุท ุงููุจูุฑุฉ
- ุฏูุฉ ุชุฌููุน ุงูููููุงุช ุงููุชุดุงุจูุฉ
- ุงุณุชุฌุงุจุฉ ูุงุฌูุฉ ุงููุณุชุฎุฏู

### ุงูุณุฌูุงุช
ุชู ุฅุถุงูุฉ ุณุฌูุงุช ููุตูุฉ ูู `ShoppingListService` ูุชุชุจุน:
- ุนุฏุฏ ุงููุตูุงุช ุงููุณุชุฎุฑุฌุฉ
- ุนุฏุฏ ุงูููููุงุช ุงููุฌูุนุฉ
- ุฃู ุฃุฎุทุงุก ุชุญุฏุซ ุฃุซูุงุก ุงูุนูููุฉ

## ุงูุฎูุงุตุฉ

ููุฒุฉ ูุงุฆูุฉ ุงูุชุณูู ุงูุฐููุฉ ุชุถูู ูููุฉ ูุจูุฑุฉ ููุชุทุจูู ูู ุฎูุงู:
- ุชูููุฑ ุงูููุช ูููุณุชุฎุฏููู
- ุชูููู ุงูุฃุฎุทุงุก ูู ููุงุฆู ุงูุชุณูู
- ุชุญุณูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู ุงูุฅุฌูุงููุฉ
- ุฑุจุท ููุฒุงุช ุงูุชุทุจูู ุจุจุนุถูุง ุงูุจุนุถ
